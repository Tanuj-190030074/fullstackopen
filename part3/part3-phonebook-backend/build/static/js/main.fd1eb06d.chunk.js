(this.webpackJsonppart2=this.webpackJsonppart2||[]).push([[0],{20:function(e,t,n){},40:function(e,t,n){"use strict";n.r(t);var r=n(1),o=n(15),c=n.n(o),s=(n(20),n(3)),a=n(4),u=n.n(a),i="/api/persons",l=function(){var e=u.a.get(i);return console.log("entered"),e.then((function(e){return e.data}))},d=function(e){return u.a.post(i,e).then((function(e){return e.data}))},f=function(e){return u.a.delete("".concat(i,"/").concat(e))},j=function(e,t){return u.a.put("".concat(i,"/").concat(e),t).then((function(e){return e.data}))},b=n(0),h=function(e){var t=e.person,n=e.setPersons,r=e.persons,o=e.setErrorMessage;return Object(b.jsxs)("li",{children:[t.name," ",t.number," ",Object(b.jsx)("button",{onClick:function(){return function(e){var t=r.find((function(t){return t.id===e}));window.confirm("Delete ".concat(t.name))&&(f(t.id).then((function(c){console.log("deleted"),n(r.filter((function(t){return t.id!==e}))),o({text:"Deleted ".concat(t.name," successfully"),type:"error2"})})).catch((function(e){console.log(e),o({text:"Information of ".concat(t.name," has already been removed from server"),type:"error"})})),setTimeout((function(){o(null)}),5e3))}(t.id)},children:"delete"})]})},p=function(e){var t=e.persons,n=e.filter,r=e.setPersons,o=e.errorMessage,c=e.setErrorMessage;return Object(b.jsx)("div",{children:Object(b.jsx)("ul",{children:t.filter((function(e){return e.name.toLowerCase().includes(n.toLowerCase())})).map((function(e,n){return Object(b.jsx)(h,{person:e,persons:t,setPersons:r,errorMessage:o,setErrorMessage:c},n)}))})})},O=function(e){var t=e.filter,n=e.setFilter;return Object(b.jsxs)("div",{children:["filter shown with ",Object(b.jsx)("input",{value:t,onChange:function(e){n(e.target.value)}})]})},m=n(6),x=function(e){var t=e.persons,n=e.setPersons,o=e.setErrorMessage,c=Object(r.useState)(""),a=Object(s.a)(c,2),u=a[0],i=a[1],l=Object(r.useState)(""),f=Object(s.a)(l,2),h=f[0],p=f[1];return Object(b.jsx)(b.Fragment,{children:Object(b.jsxs)("form",{onSubmit:function(e){if(e.preventDefault(),console.log("entered"),t.find((function(e){return e.name===u}))){if(window.confirm("".concat(u," is already added to phonebook, replace the old number with a new one?"))){var r=t.find((function(e){return e.name===u})),c=Object(m.a)(Object(m.a)({},r),{},{number:h});j(c.id,c).then((function(){n(t.map((function(e){return e.id!==c.id?e:c}))),o({text:"Updated ".concat(c.name," successfully"),type:"error2"})})).catch((function(e){console.log(e),o({text:"".concat(e.response.data.error),type:"error"})})),setTimeout((function(){o(null)}),5e3)}}else{var s={id:t.length+1,name:u,number:h};d(s).then((function(e){o({text:"Added ".concat(e.name),type:"error2"}),n(t.concat(e))})).catch((function(e){o({text:"".concat(e.response.data.error),type:"error"})})),setTimeout((function(){o(null)}),5e3)}},children:[Object(b.jsxs)("div",{children:["name: ",Object(b.jsx)("input",{onChange:function(e){e.preventDefault(),console.log(e.target.value),i(e.target.value)},value:u})]}),Object(b.jsxs)("div",{children:["number: ",Object(b.jsx)("input",{value:h,onChange:function(e){e.preventDefault(),console.log(e.target.value),p(e.target.value)}})]}),Object(b.jsx)("div",{children:Object(b.jsx)("button",{type:"submit",children:"add"})})]})})},v=function(e){var t=e.errorMessage;return null===t?null:Object(b.jsx)("div",{className:t.type,children:t.text})},g=function(){var e=Object(r.useState)([]),t=Object(s.a)(e,2),n=t[0],o=t[1],c=Object(r.useState)(""),a=Object(s.a)(c,2),u=a[0],i=a[1],d=Object(r.useState)(null),f=Object(s.a)(d,2),j=f[0],h=f[1];return Object(r.useEffect)((function(){l().then((function(e){console.log(e),o(e)}))}),[]),Object(b.jsxs)("div",{children:[Object(b.jsx)("h2",{children:"Phonebook"}),Object(b.jsx)(v,{errorMessage:j}),Object(b.jsx)(O,{filter:u,setFilter:i}),Object(b.jsx)("h2",{children:"add a new"}),Object(b.jsx)(x,{persons:n,setPersons:o,setErrorMessage:h}),Object(b.jsx)("h2",{children:"Numbers"}),Object(b.jsx)(p,{persons:n,setPersons:o,filter:u,setErrorMessage:h})]})};c.a.render(Object(b.jsx)(g,{}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.fd1eb06d.chunk.js.map